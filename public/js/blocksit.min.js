!function(e){var n,i,o={numOfCol:5,offsetX:5,offsetY:5,blockElement:"div"},u=[];function s(t,e){for(var n=[],r=0;r<e;r++)n.push(u[f(t+r,"x")].endY);var i=Math.min.apply(Math,n);return[i,Math.max.apply(Math,n),n.indexOf(i)]}function r(t,e){!t.data("size")||t.data("size")<0?t.data("size",1):t.data("size")>o.numOfCol&&t.data("size",o.numOfCol);var n=function(t){if(1<t){for(var e,n,r=u.length-t,i=!1,a=0;a<u.length;a++){var f,o=u[a].x;0<=o&&o<=r&&(f=s(o,t),i?f[1]<e[1]&&(e=f,n=o):(i=!0,e=f,n=o))}return[n,e[1]]}return[(e=s(0,u.length))[2],e[0]]}(t.data("size")),r=i*t.data("size")-(t.outerWidth()-t.width());t.css({width:r-2*o.offsetX,left:n[0]*i,top:n[1],position:"absolute"}),r=t.outerHeight(),function(t,e){for(var n=0;n<e;n++){var r=f(t+n,"x");u.splice(r,1)}}(n[0],t.data("size")),a(t.attr("id"),n[0],n[1],t.data("size"),r)}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1});var a=function(t,e,n,r,i){for(var a=0;a<r;a++){var f=new Object;f.x=e+a,f.size=r,f.endY=n+i+2*o.offsetY,u.push(f)}},f=function(t,e){for(var n=0;n<u.length;n++){var r=u[n];if("x"==e&&r.x==t)return n;if("endY"==e&&r.endY==t)return n}};e.fn.BlocksIt=function(t){t&&"object"==typeof t&&e.extend(o,t),n=e(this),i=n.width()/o.numOfCol,function(){u=[];for(var t=0;t<o.numOfCol;t++)a("empty-"+t,t,0,1,-o.offsetY)}(),n.children(o.blockElement).each(function(t){r(e(this))});t=s(0,u.length);return n.height(t[1]+o.offsetY),this}}(jQuery);